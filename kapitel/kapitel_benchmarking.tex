\chapter{Evaluation}

\section{Full-Mesh vs. Partial-Mesh Szenario}

Um zu verdeutlichen, wie der umgesetzte Ansatz, zu Einsparungen beim Verbrauch der Bandbreite eingesetzt werden kann, wird er mit einem gewöhlichem Full-Mesh Ansatz verglichen, in dem jeder Teilnehmer des Spiels mit allen anderen 
Teilnehmern Audioverbindungen aufbaut, unabhängig davon, wo sich diese im Spiel befinden.

Im vorgeschlagenen Partial-Mesh-Ansatz dagegen, verbindet sich der Teilnehmer nur mit Spielern die sich in seiner unmittelbaren Nähe befinden. Dieses Verhalten entspricht dem umgesetzten Proximitätskonzept, in dem nur Audioverbindungen mit Spielern aufgebaut werden, die sich mindestens in der Öffentlichen Zone befinden.

In einem einfachen Szenario werden beide Ansätze ausprobiert: Hier betreten 5 Spieler nacheinander die Spielewelt. Die Nummer des Teilnehmers entspricht der Reihenfolge seiner Teilnahme am Spiel: Zunächst betritt Teilnehmer 1 das Spielfeld, danach Teilnehmer 2 usw... .Spieler 1, 2 und 3 befinden sich in gegenseitiger Hörnähe, während Spieler 5 und 6 isolierte Positionen einnehmen. 

\subsection{Full-Mesh}
Die Abbildung \ref{fullmeshszenario} zeigt, dass beim Full-Mesh-Ansatz jeder Teilnehmer Verbindungen zu allen anderen Teilnehmern etabliert und so für jeden Teilnehmer eine hohe Bandbreitenbelastung zustande kommt. 

\begin{figure}[tbh]
	\centering
		\includegraphics[width=.60\textwidth]{grafiken/fullmesh.eps}
			\caption{Audioverbindungen im Full-Mesh-Ansatz}
	\label{fig:fullmesh}
\end{figure}

Der Bandbreitenverbrauch wurde in Abbildung \ref{fig:fullmesh-withchart} aus Sicht des Teilnehmers 1 gemessen. Da alle 10 Sekunden ein weiterer Spieler das Spielfeld betritt, wird auch eine Audioverbindung mit diesem Spieler aufgebaut. Dies führt dazu, dass der Verbrauch der Bandbreite sich jeweils um weitere 10Kb/s erhöht. Bei allen Messungen wurde der Speex Codec mit einer Abtastrate von 16kHz benutzt, der eine mittlere Bitrate von 10 - 15 Kb/s besitzt.

\begin{figure}[tbh]
	\centering
		\includegraphics[width=.70\textwidth]{grafiken/fullmeshchart.eps}
	\caption{Bandbreitenverbrauch beim Full-Mesh-Ansatz}
	\label{fig:fullmesh-withchart}
\end{figure}

\subsection{Partial-Mesh}
Im gleichen Szenario wurde nun die Partial-Mesh Technik eingesetzt, bei der nur noch Verbindungen mit Teilnehmern aufgebaut wurden, die sich mindestens in der öffentlichen Zone des Spielers befinden (siehe Abbildung \ref{fig:partialmesh}).

In der öffentlichen Zone wird zunächst ein SIP Anruf ausgeführt, jedoch gleichzeitig eine \textit{Silence Supression} auf RTP-Ebene vorgenommen. Diese wird so lange aufrecht erhalten, bis der Teilnehmer sich in die Soziale Zone begibt. In der sozialen Zone wird der volle RTP-Audiostrom zwischen den Teilnehmern initiiert. 

Dieses Vorgehen führt dazu, dass Spieler 1 zunächst zwei logische SIP Verbindungen mit Spieler 2 und 3 etabliert. Während mit Spieler 2 ein voller RTP Audiostrom fließt, da sich dieser in der sozialen Zone befindet, wird mit Spieler 3 nur eine Audioverbindung mit \textit{Silence Suppression} etabliert. Teilnehmer 4 und 5 bauen keine Verbindungen auf, da sie sich nicht in Hörreichweite befinden. 

\begin{figure}[tbh]
	\centering
		\includegraphics[width=.70\textwidth]{grafiken/partialmesh.eps}
	\caption{Ein Partial-Mesh der Audioverbindungen der Teilnehmer}
	\label{fig:partialmesh}
\end{figure}

Der Bandbreitenverbrauch wurde auch aus Sicht des ersten Teilnehmers gemessen. Abbildung \ref{fig:partialmeshchart} zeigt, dass in dem Moment, in dem Spieler 2 das Spiel betritt, eine Audioverbindung aufgebaut wird, die zwischen 10-15Kb/s verbraucht. Betritt Spieler 3 das Spiel, werden nur zusätzliche 1-2Kb/s zur Aufrechterhaltung der Grundkonnektivität der RTP-Verbindung benötigt. Würde sich Teilnehmer 3 nun auf Spieler 1 zu bewegen, würde die Silence Suppression aufgehoben und auch ein normaler Audiostrom von 10-15kbs fließen. Spieler 4 und 5 verursachen keinen zusätzlichen Bandbreitenverbrauch, da sie sich außerhalb der öffentlichen Zone befinden.

\begin{figure}[tbh]
	\centering
		\includegraphics[width=.70\textwidth]{grafiken/partialmeshchart.eps}
	\caption{Bandbreiteneinsparungen beim Partial-Mesh, da nicht mehr alle Verbindungen aufgebaut werden müssen}
	\label{fig:partialmeshchart}
\end{figure}

\subsubsection{Partial-Mesh Worst Case}
Unter ungünstige Randbedingungen (siehe Abbildung \ref{fig:fullmesh-worstcase}, befinden sich alle Teilnehmer im gegenseitigen Hörradius, was dazu führt, dass eine Full-Mesh Topologie zwischen ihnen aufgebaut wird. Hier kann keine Bandbreite eingespart werden und das vorgestellte Verfahren verliert seinen Vorteil.

\begin{figure}[tbh]
	\centering
		\includegraphics[width=0.70\textwidth]{grafiken/fullmesh-worstcase.eps}
	\caption{Partial-Mesh Worstcase Szenario gleicht dem Fullmesh Ansatz}
	\label{fig:fullmesh-worstcase}
\end{figure}

\section{Zonenkonzepte}
Um den Bandbreitenverbrauch in den einzelnen Zonen aufzuzeigen, wurde ein einfaches Szenario erstellt, bei 2 Spieler am gleichen Ausgangspunkt das Spiel beginnen und sich dann voneinander wegbewegen. Während sie die einzelnen Zonen durchlaufen wird der Bandbreitenverbrauch gemessen. Dabei wird nicht nur zwischen dem Up- und Downloadverbrauch, sondern auch zwischen dem des SIP und RTP Protokolls unterschieden. 
Für die drei Implementierungsvariationen (Silence Supression, SIP-Hold, unterschiedliche Audiocodecs), die in Kapitel 7 erläutert wurden und das Ziel haben einer Reduzierung der benötigten Bandbreite zu bewirken, wurde jeweils eine Messung vorgenommen. 

\subsection{Ohne Unterscheidung}
Hier entfernen sich beide Spieler voneinander, es werden jedoch keine Bandbreitenreduzierenden Maßnahmen in Abhängigkeit von der Zone des Spielers getroffen. Man erkennt in der Abbildung \ref{fig:NOVADrtpsip}, dass die Bandbreite sich in allen Zonen gleichmäßig verhält. 

\begin{figure}[tbh]
	\centering
	\caption{Der Up- und Downstream}
		\includegraphics[width=1.00\textwidth]{grafiken/ohnevpn1.eps}
	\label{fig:NOVADrtpsip}
\end{figure}

Beim Vergleich des RTP und SIP Protokolls in Abbildung \ref{fig:NoVADupdown} sieht man, dass SIP nur zum Signalisieren des Anrufs benutzt wird, da es nur am Anfang und Ende des SIP Anrufs Bandbreite erzeugt, während das RTP Protokoll für den reinen Audiostrom zuständig ist. 

\begin{figure}[tbh]
	\centering
		\includegraphics[width=1.00\textwidth]{grafiken/ohnevpn2.eps}
		\caption{Signalisierung mit SIP, Audiostrom mit RTP}
	\label{fig:NoVADupdown}
\end{figure}

\subsection{Zonen mit RTP Silence Supression}

Hier wird in der öffentlichen Zone eine Silence Supression durchgeführt. In der Abbildung \ref{fig:VADupdown} ist zu erkennen, dass sich hier der Bandbreitenverbrauch auf unter 2kbps reduziert, während er in der privaten und sozialen Zone knapp das 6fache beträgt. 

\begin{figure}[tbh]
	\centering
		\includegraphics[width=1.00\textwidth]{grafiken/mitvadupdown.eps}
		\caption{Der Up- und Downstream mit der VAD-Technik}
	\label{fig:VADupdown}
\end{figure}

In der Abbildung \ref{fig:VADRTPSIP} wurden die SIP und RTP Protokolle dargestellt. Man kann erkennen, dass bei der Silence Supression beim RTP Protokoll die Bandbreite drastisch sinkt. Es wird auch deutlich, dass in diesem Fall nicht das SIP Protokoll eingesetzt wird, um diese Änderung zu bewirken, sondern es sich um eine Eigenschaft des RTP Protokolls handelt.

\begin{figure}[tbh]
	\centering
		\includegraphics[width=1.00\textwidth]{grafiken/mitvadrtpsip.eps}
		\caption{Gegenüberstellung der SIP und RTP Traffics mit der VAD-Technik}
	\label{fig:VADRTPSIP}
\end{figure}

\subsection{Zonen mit SIP HOLD}

Eine weitere Unterscheidung der Zonen wurde mit dem SIP "`Hold Call"' Ansatz versucht, bei dem in der öffentlichen Zone, mittels des SIP Protokolls der logische Anruf gehalten wird, aber auf RTP Ebene keine Übertragung der Pakete stattfindet. Wie Abbildung \ref{fig:mitholdupanddown} zeigt, kann dieser Ansatz sogar noch mehr Bandbreite in der öffentlichen Zone als die Silence Supression einsparen, da praktisch kein Datenaustausch mehr stattfindet.

Allerdings konnte der SIP-HOLD-Ansatz in der Praxis nicht bewähren, da beim Halten und Wiederaufnehmen des Gesprächs, die Sitzungsparameter wieder neu verhandelt werden, was zu einer spürbaren Verzögerung führte. Es ist vorstellbar, dass der SIP Anruf schon etwas früher wiederaufgenommen wird, um diese Verzögerung auszugleichen. 

\begin{figure}[tbh]
	\centering
		\includegraphics[width=1.00\textwidth]{grafiken/mitholdupanddown.eps}
		\caption{Der Up- und Downstream mit der SIP HOLD - Technik}
	\label{fig:mitholdupanddown}
\end{figure}

Beim Bandbreitenvergleich der SIP und RTP Protokolle sieht man, dass eine Signalisierung mittels SIP beim Übergang von der sozialen zur öffentlichen Zone stattfindet. 

\begin{figure}[tbh]
	\centering
	\caption{Gegenüberstellung des SIP und RTP Traffics mit der SIP HOLD-Technik}
		\includegraphics[width=1.00\textwidth]{grafiken/mithold1.eps}
	\label{fig:mithold1}
\end{figure}

\subsection{Zonen mit unterschiedlichen Audiocodecs}
Die dritte Variante beinhaltete den Einsatz von 2 verschiedenen Codecs für die Private und Soziale Zone. In der Privaten Zone wurde der qualitativ hohe Speex Codec mit einer Abtastrate von 32kHz verwendet, während in der sozialen Zone nur der Speex Codec mit einer Abtastrate von 8kHz verwendet wurde. 

Da erwartet wird, dass in der sozialen Zone mehr Verbindungen als in der privaten Zone aufgebaut werden, wird hier auch ein Codec mit einer niedrigeren Bitrate verwendet, um eine größere Anzahl an Verbindungen zu ermöglichen. In der öffentlichen Zone wird, wie im oberen Beispiel die \textit{Silence Supression} angewendet. Unter diesen Voraussetzungen ist in Abbildung \ref{fig:mitvadund2codecs} zu sehen, dass der Bandbreitenverbrauch in der sozialen Zone im Vergleich zur privaten Zone reduziert wird und in der öffentlichen Zone sehr gering ausfällt.

\begin{figure}[tbh]
	\centering
		\includegraphics[width=\textwidth]{grafiken/mitvadund2codecs.eps}
		\caption{Speex mit 32kHz in der privaten Zone und Speex 8khZ in der sozialen Zone}
	\label{fig:mitvadund2codecs}
\end{figure}

Im Vergleich (siehe Abbildung \ref{fig:mitvadundrtpsip}) der beiden SIP und RTP Protokolle ist beim SIP Protokoll sowohl der Ruf -auf und -abbau zu erkennen als auch die Signalisierung eines anderen Sprachcodecs beim Übergang von der Privaten in die Soziale Zone. Beim RTP Protokoll ist die Übertragung des Audiostroms und die reduzierte Bitrate in der sozialen und öffentlichen Zone zu erkennen.

\begin{figure}[tbh]
	\centering
		\includegraphics[width=\textwidth]{grafiken/mitvadundrtpsip.eps}
		\caption{Rufauf und -abbau, sowie Signalisierung eines anderen Codecs mit SIP, Reduktion des Audiostroms mit RTP}
	\label{fig:mitvadundrtpsip}
\end{figure}

%\subsection{SIP Benchmarks}
%\subsection{Mixing}
%-- Verbrauch der CPU Last mit Zunehmender Nutzerzahl beim Full Mesh 
%-- Verbrauch der CPU Last mit Zunehmender Nutzerzahl beim Partial Mesh
%--> Müsste zeigen dass weniger Streams gemischt werden müssen und somit Last eingespart werden %kann. ( Wie messe ich das?)
%MESSUNG: einfach nur die conference bridge messen.

\section{Tests von SIP als Netzwerkschnittstelle}
-- RTT über die zeit bei konstanten benutzern vs. Resultat mit Multicast Sockets oder Skype.
-- bzw. Vergleich des Traffics bei Zunehmender Benutzeranzahl

\section{Test der Conference-Bridge}
-- CPU vs Anzahl gleichzeitig abgemischter Audioströme.
